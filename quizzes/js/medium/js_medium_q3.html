<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JS meduim - Q3</title>
  <link rel="stylesheet" href="..\..\..\quizzes\style_quiz.css">
  <link rel="icon" type="image/png" href="..\..\..\plant.png">
</head>
<body>
  <div class="navbar">
    <a href="..\..\..\index.html"><div>üè†</div></a>
    <a  class="link_nav"><div class="nav-item">1</div></a>
    <a  class="link_nav"><div class="nav-item">2</div></a>
    <div class="nav-item active">3</div>
    <a  class="link_nav"><div class="nav-item">4</div></a>
    <a  class="link_nav"><div class="nav-item">5</div></a>
    <a  class="link_nav"><div class="nav-item">6</div></a>
    <a  class="link_nav"><div class="nav-item">7</div></a>
    <a  class="link_nav"><div class="nav-item">8</div></a>
    <a  class="link_nav"><div class="nav-item">9</div></a>
    <a  class="link_nav"><div class="nav-item">10</div></a>
  </div>

  <div class="quiz-container">
    <div class="question-box">
      <h2>Question 3:</h2>
      <p>Which method creates a new array from existing elements?</p>

      <ul id="choices">
        <li><button onclick="checkAnswer(0)">slice()</button></li>
        <li><button onclick="checkAnswer(1)">splice()</button></li>
        <li><button onclick="checkAnswer(2)">join()</button></li>
        <li><button onclick="checkAnswer(3)">concat()</button></li>
      </ul>

      <p id="feedback"></p>
      <div class="buttons">
        <button class="hint" onclick="hint()">Hint</button>
        <button id="next-button" class="next" onclick="nextQuestion()">Next</button>
      </div>
      <script>
        function hint() {
          alert("Hint: Doesn‚Äôt modify original.");
        }
      </script>
    </div>

    <div class="plant-box">
      <h2 id="welcome-message"></h2>
      <p>Here is your plant.Try hard and help it to grow up</p>
      <img id="plant-img" src="..\..\..\plants\stage2.png" alt="Plant">
    </div>
    <audio id="correct-sound" src="..\..\..\sounds/correct.mp3"></audio>
    <audio id="wrong-sound"   src="..\..\..\sounds/wrong.mp3"></audio>
  </div>

  <script>
  let correctAnswer = 0;

 function checkAnswer(index) {
    const choices = document.querySelectorAll("#choices li button");
    const feedback = document.getElementById("feedback");
    const correctSound = document.getElementById("correct-sound");
    const wrongSound = document.getElementById("wrong-sound");
    const nextButton = document.getElementById("next-button");

    const name = localStorage.getItem("username");
    const message = name ? `Let's do it, ${name}! ` : "Let's do it!";
    document.getElementById("welcome-message").innerText = message;

    if (index === correctAnswer) {
      feedback.textContent = "‚úÖ Correct!";
      choices[index].style.backgroundColor = "#4ade80";
      document.getElementById("plant-img").src = "../../../plants/stage3.png";

      correctSound.currentTime = 0;
      correctSound.play();

      nextButton.disabled = false;

      let progress = JSON.parse(localStorage.getItem("progress"));
      if (!progress.answered.includes(1)) progress.answered.push(1);
      progress.current = 2;
      localStorage.setItem("progress", JSON.stringify(progress));
    } else {
      feedback.textContent = "‚ùå Try again!";
      choices[index].style.backgroundColor = "#f87171";

      wrongSound.currentTime = 0;
      wrongSound.play();

      nextButton.disabled = true;
    }
  }
  document.getElementById("next-button").disabled = true;

  function nextQuestion() {
    window.location.href = "js_meduim_q4.html";
  }
</script>

</body>
</html>
